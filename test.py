# a = {'data': [{'attributes': {}, 'content': [{'text': "Offences Against the Person Act 1861\n\n\nStatus: This is the original version (as it was originally enacted).\n\nOffences Against the Person Act 1861\n1861 CHAPTER 100\n\nAn Act to consolidate and amend the Statute Law of England and Ireland relating to\nOffences against the Person. [6th August 1861]\n\nWHEREAS it is expedient to consolidate and amend the Statute Law of England and Ireland\nrelating to Offences against the Person :\n\nBe it enacted by the Queen's most Excellent Majesty, by and with the Advice and Consent of\nthe Lords Spiritual and Temporal, and Commons, in this present Parliament assembled, and by\nthe Authority of the same, as follows :\n\nHomicide\n\n1 Murder.\n\nWhosoever shall be convicted of Murder shall suffer Death as a Felon.\n\n2 Sentence for Murder.\n\nUpon every Conviction for Murder the Court shall pronounce Sentence of Death, and\nthe same may be earned into execution, and all other Proceedings upon such Sentence\nand in respect thereof may be had and taken, in the same Manner in all respects as\nSentence of Death might have been pronounced and carried into execution, and all\nother Proceedings thereupon and in respect thereof might have been had and taken,\nbefore the passing of this Act, upon a Conviction for any other Felony for which the\nPrisoner might have been sentenced to suffer Death as a Felon.\n\n3 Body to be buried in Prison.\n\nThe Body of every Person executed for Murder shall be buried within the Precincts of\nthe Prison in which he shall have been last confined after Conviction, and the Sentence\nof the Court shall so direct.\n\n\n\n2 Offences Against the Person Act 1861 (c. 100)\nDocument Generated: 2022-08-21\n\nStatus:  This is the original version (as it was originally enacted).\n\n4 Conspiring or soliciting to commit Murder\n\nAll Persons who shall conspire, confederate, and agree to murder any Person, whether,\nhe be a Subject of Her Majesty or not, and whether he be within the Queen's Dominions\nor not, and whosoever shall solicit, encourage, persuade, or endeavour to persuade, or\nshall propose to any Person, to murder any other Person, whether he be a Subject of\nHer Majesty or not, and whether he be within the Queen's Dominions or not, shall be\nguilty of a Misdemeanor, and being convicted thereof shall be liable, at the Discretion\nof the Court, to be kept in Penal Servitude for any Term not more than Ten and not\nless than Three Years,â€”or to be imprisoned for any Term not exceeding Two Years,\nwith or without Hard Labour.\n\n5 Manslaughter.\n\nWhosoever shall be convicted of Manslaughter shall be liable, at the Discretion of the\nCourt, to be kept in Penal Servitude for Life or for any Term not less than Three Years,\nâ€”or to be imprisoned for any Term not exceeding Two Years, with or without Hard\nLabour, or to pay such Fine as the Court shall award, in addition to or without any\nsuch other discretionary Punishment as aforesaid.\n\n6 Indictment for Murder or Manslaughter.\n\nIn any Indictment for Murder or Manslaughter, or for being an Accessory to any\nMurder or Manslaughter, it shall not be necessary to set forth the Manner in which or\nthe Means by which the Death of the Deceased was caused, but it shall be sufficient in\nany Indictment for Murder to charge that the Defendant did feloniously, wilfully, and\nof his Malice aforethought kill and murder the Deceased ;", 'type': 'text'}], 'file_id': 'file-HEHpFkAwqHtR4b2ARBkYLg', 'filename': 'OAPA.pdf', 'score': 0.8930399362178516}, {'attributes': {}, 'content': [{'text': '14 Attempting to Administer Poison, or shooting or attempting to shoot or\nattempting to drown &c., with Intent to murder.\n\nWhosoever shall attempt to administer to or shall attempt to cause to be administered\nto or to be taken by any Person any Poison or other Destructive Thing, or shall shoot\nat any Person, or shall, by drawing a Trigger or in any other Manner, attempt to\ndischarge any kind of loaded Arms at any Person, or shall attempt to drown, suffocate,\nor strangle any Person, with Intent, in any of the Oases aforesaid, to commit Murder,\nshall, whether any bodily Injury be effected or not, be guilty of Felony, and being\nconvicted thereof shall be liable, at the Discretion of the Court, to be kept in Penal\nServitude for Life or for any Term not less than Three Years,â€”or to be imprisoned for\nany Term not exceeding Two Years, with or without Hard Labour, and with or without\nSolitary Confinement.\n\n15 By any other Means attempting to commit Murder.\n\nWhosoever shall, by any Means other than those specified in any of the preceding.\nSections of this Act, attempt to commit Murder, shall be guilty of Felony, and being\nconvicted thereof shall be liable, at tho Discretion of the Court, to be kept in Penal\nServitude for Life or for any Terra not less than Three years,â€”or to be imprisoned for\nany Term not exceeding Two Years, with or without Hard Labour, and with or without\nSolitary Confinement.\n\nLetters threatening to murder\n\n16 Sending Letters threatening to murder.\n\nWhosoever shall maliciously send, deliver, or utter, or directly or indirectly cause to\nbe received, knowing the Contents thereof, any Letter or Writing threatening to kill\nor murder any Person, shall be guilty of Felony, and being convicted thereof shall\nbe liable, at the Discretion of the Court, to be kept in Penal Servitude for any Term\nnot exceeding Ten Years and not less than Three Years,â€”or to be imprisoned for any\nTerm not exceeding Two Years, with or without Hard Labour, and with or without\nSolitary Confinement, and, if a Male under the Age of Sixteen Years, with or without\nWhipping.\n\nActs causing or tending to cause Danger to Life or bodily Harm\n\n17 Impeding a Person endeavouring to save himself from Shipwreck.\n\nWhosoever shall unlawfully and maliciously prevent or impede any Person, being on\nboard of or having quitted any Ship or Vessel which shall be in Distress, or wrecked,\nstranded, or cast on shore, in his Endeavour to save his Life, or shall unlawfully and\nmaliciously prevent or impede any Person in his Endeavour to save the Life of any\nsuch Person as in this Section first aforesaid, shall be guilty of Felony, and being\nconvicted thereof shall be liable, at the Discretion of the Court, to be kept in Penal\nServitude for Life or for any Term not less than Three Years,â€”or to be imprisoned for\n\n\n\nOffences Against the Person Act 1861 (c. 100)\nDocument Generated: 2022-08-21\n\n5\n\nStatus:  This is the original version (as it was originally enacted).\n\nany Term not exceeding Two Years, with or without Hard Labour, and with or without\nSolitary Confinement.\n\n18 Shooting or attempting to shoot, or wounding with Intent to do grievous bodily\nHarm.\n\nWhosoever shall unlawfully and maliciously by any Means whatsoever wound or\ncause any grievous bodily Harm to any Person, or shoot at any Person, or, by drawing\na Trigger or in any other Manner,', 'type': 'text'}], 'file_id': 'file-HEHpFkAwqHtR4b2ARBkYLg', 'filename': 'OAPA.pdf', 'score': 0.8772706452131884}, {'attributes': {}, 'content': [{'text': "Status:  This is the original version (as it was originally enacted).\n\n4 Conspiring or soliciting to commit Murder\n\nAll Persons who shall conspire, confederate, and agree to murder any Person, whether,\nhe be a Subject of Her Majesty or not, and whether he be within the Queen's Dominions\nor not, and whosoever shall solicit, encourage, persuade, or endeavour to persuade, or\nshall propose to any Person, to murder any other Person, whether he be a Subject of\nHer Majesty or not, and whether he be within the Queen's Dominions or not, shall be\nguilty of a Misdemeanor, and being convicted thereof shall be liable, at the Discretion\nof the Court, to be kept in Penal Servitude for any Term not more than Ten and not\nless than Three Years,â€”or to be imprisoned for any Term not exceeding Two Years,\nwith or without Hard Labour.\n\n5 Manslaughter.\n\nWhosoever shall be convicted of Manslaughter shall be liable, at the Discretion of the\nCourt, to be kept in Penal Servitude for Life or for any Term not less than Three Years,\nâ€”or to be imprisoned for any Term not exceeding Two Years, with or without Hard\nLabour, or to pay such Fine as the Court shall award, in addition to or without any\nsuch other discretionary Punishment as aforesaid.\n\n6 Indictment for Murder or Manslaughter.\n\nIn any Indictment for Murder or Manslaughter, or for being an Accessory to any\nMurder or Manslaughter, it shall not be necessary to set forth the Manner in which or\nthe Means by which the Death of the Deceased was caused, but it shall be sufficient in\nany Indictment for Murder to charge that the Defendant did feloniously, wilfully, and\nof his Malice aforethought kill and murder the Deceased ; and it shall be sufficient in\nany Indictment for Manslaughter to charge that the Defendant did feloniously kill and\nslay the Deceased; and it shall be sufficient in any Indictment against any Accessory to\nany Murder or Manslaughter to charge the Principal with the Murder or Manslaughter\n(as the Case may be) in the Manner herein-before specified, and then to charge the\nDefendant as an Accessory in the Manner heretofore used and accustomed.\n\n7 Excusable Homicide.\n\nNo Punishment or Forfeiture shall be incurred by any Person who shall kill another\nby Misfortune or in his own Defence, or in any other Manner without Felony.\n\n8 Petit Treason.\n\nEvery Offence which before the Commencement of the Act of the Ninth Year of King\nGeorge the Fourth, Chapter Thirty-one, would have amounted to Petit Treason, shall\nbe deemed to be Murder only, and no greater Offence; and all Persons guilty in respect\nthereof, whether as Principals or as Accessories, shall be dealt with, indicted, tried,\nand punished as Principals and Accessories in Murder.\n\n9 Murder or Manslaughter abroad.\n\nWhere any Murder or Manslaughter shall be committed on Land out of the United\nKingdom, whether within the Queen's Dominions or without, and whether the Person\nkilled were a Subject of Her Majesty or not, every Offence committed by any Subject\nof Her Majesty, in respect of any such Case, whether the same shall amount to\n\n\n\nOffences Against the Person Act 1861 (c. 100)\nDocument Generated: 2022-08-21\n\n3\n\nStatus:  This is the original version (as it was originally enacted).", 'type': 'text'}], 'file_id': 'file-HEHpFkAwqHtR4b2ARBkYLg', 'filename': 'OAPA.pdf', 'score': 0.859392351323678}, {'attributes': {}, 'content': [{'text': '12 Destroying or damaging a Building with Gunpowder, with Intent to murder.\n\nWhosoever, by the Explosion of Gunpowder or other explosive Substance, shall\ndestroy or damage any Building with Intent to commit Murder, shall be guilty of\nFelony, and being convicted thereof shall be liable, at the Discretion of the Court, to\nbe kept in Penal Servitude for Life or for any Term not less than Three Years, or to\nbe imprisoned for any Term not exceeding Two Years, with or without Hard Labour,\nand with or without Solitary Confinement.\n\n13 Setting fire to or casting away a Ship with Intent to murder.\n\nWhosoever shall set fire to any Ship or Vessel or any Part thereof, or any Part of the\nTackle, Apparel, or Furniture thereof, or any Goods or Chattels being therein, or shall\ncast away or destroy any Ship or Vessel, with Intent in any of such Cases to commit\nMurder, shall be guilty of Felony, and being convicted thereof shall be liable, at the\n\n\n\n4 Offences Against the Person Act 1861 (c. 100)\nDocument Generated: 2022-08-21\n\nStatus:  This is the original version (as it was originally enacted).\n\nDiscretion of the Court, to be kept in Penal Servitude for Life or for any Term not less\nthan Three Years,â€”or to be imprisoned for any Term not exceeding Two Years, with\nor without Hard Labour, and with or without Solitary Confinement.\n\n14 Attempting to Administer Poison, or shooting or attempting to shoot or\nattempting to drown &c., with Intent to murder.\n\nWhosoever shall attempt to administer to or shall attempt to cause to be administered\nto or to be taken by any Person any Poison or other Destructive Thing, or shall shoot\nat any Person, or shall, by drawing a Trigger or in any other Manner, attempt to\ndischarge any kind of loaded Arms at any Person, or shall attempt to drown, suffocate,\nor strangle any Person, with Intent, in any of the Oases aforesaid, to commit Murder,\nshall, whether any bodily Injury be effected or not, be guilty of Felony, and being\nconvicted thereof shall be liable, at the Discretion of the Court, to be kept in Penal\nServitude for Life or for any Term not less than Three Years,â€”or to be imprisoned for\nany Term not exceeding Two Years, with or without Hard Labour, and with or without\nSolitary Confinement.\n\n15 By any other Means attempting to commit Murder.\n\nWhosoever shall, by any Means other than those specified in any of the preceding.\nSections of this Act, attempt to commit Murder, shall be guilty of Felony, and being\nconvicted thereof shall be liable, at tho Discretion of the Court, to be kept in Penal\nServitude for Life or for any Terra not less than Three years,â€”or to be imprisoned for\nany Term not exceeding Two Years, with or without Hard Labour, and with or without\nSolitary Confinement.\n\nLetters threatening to murder\n\n16 Sending Letters threatening to murder.', 'type': 'text'}], 'file_id': 'file-HEHpFkAwqHtR4b2ARBkYLg', 'filename': 'OAPA.pdf', 'score': 0.8508230744712745}, {'attributes': {}, 'content': [{'text': 'the Offence of Murder or of Manslaughter, or of being accessory to Murder or\nManslaughter, may be dealt with, inquired of, tried, determined, and punished in any\nCounty or Place in England or Ireland in which such Person shall be apprehended\nor be in Custody, in the same Manner in all respects as if such Offence had been\nactually committed in that County or Place; provided that nothing herein contained\nshall prevent any Person from being tried in any Place out of England of Ireland for any\nMurder or Manslaughter committed out Of England or Ireland, in the same Manner\nas such Person might have been tried before the passing of this Act.\n\n10 Provision for the Trial of Murder and Manslaughter where the Death or Cause\nof Death only happens in England or Ireland.\n\nWhere any Person, being feloniously stricken, poisoned, or otherwise hurt upon the\nSea, or at any Place out of England or Ireland, shall die of such Stroke, Poisoning,\nor Hurt in England or Ireland, or, being feloniously stricken, poisoned, or otherwise\nhurt at any Place in England or Ireland, shall die of such Stroke, Poisoning, or Hurt\nupon the Sea, or at any Place out of England or Ireland, every Offence committed in\nrespect of any such Case, whether the same shall amount to the Offence of Murder\nor of Manslaughter, or of being accessory to Murder or Manslaughter, may be dealt\nwith, inquired of, tried, determined, and punished in the County or Place in England\nor Ireland in which such Death, Stroke, Poisoning, or Hurt shall happen, in the same\nManner in all respects as if such Offence had been wholly committed in that County\nor Place.\n\nAttempts to murder\n\n11 Administering Poison, or wounding with Intent to murder.\n\nWhosoever shall administer to or cause to be administered to or to be taken by any\nPerson any Poison or other destructive Thing, or shall by any Means whatsoever\nwound or cause any grievous bodily Harm to any Person, with Intent in any of the\nCases aforesaid to commit Murder, shall be guilty of Felony, and being convicted\nthereof shall be liable, at the Discretion of the Court, to be kept in Penal Servitude\nfor Life or for any Term not less than Three Years, or to be imprisoned for any Term\nnot exceeding Two Years, with or without Hard Labour, and with or without Solitary\nConfinement.\n\n12 Destroying or damaging a Building with Gunpowder, with Intent to murder.\n\nWhosoever, by the Explosion of Gunpowder or other explosive Substance, shall\ndestroy or damage any Building with Intent to commit Murder, shall be guilty of\nFelony, and being convicted thereof shall be liable, at the Discretion of the Court, to\nbe kept in Penal Servitude for Life or for any Term not less than Three Years, or to\nbe imprisoned for any Term not exceeding Two Years, with or without Hard Labour,\nand with or without Solitary Confinement.\n\n13 Setting fire to or casting away a Ship with Intent to murder.\n\nWhosoever shall set fire to any Ship or Vessel or any Part thereof, or any Part of the\nTackle, Apparel, or Furniture thereof, or any Goods or Chattels being therein, or shall\ncast away or destroy any Ship or Vessel, with Intent in any of such Cases to commit\nMurder, shall be guilty of Felony, and being convicted thereof shall be liable, at the\n\n\n\n4 Offences Against the Person Act 1861 (c. 100)\nDocument Generated: 2022-08-21\n\nStatus:  This is the original version (as it was originally enacted).', 'type': 'text'}], 'file_id': 'file-HEHpFkAwqHtR4b2ARBkYLg', 'filename': 'OAPA.pdf', 'score': 0.8326946390977357}, {'attributes': {}, 'content': [{'text': 'or shoot at any Person, or, by drawing\na Trigger or in any other Manner, attempt to discharge any Kind of loaded Arms at\nany Person, with Intent, in any of the Cases aforesaid, to maim, disfigure, or disable\nany Person, or to do some other grievous bodily Harm to any Person, or with Intent to\nresist or prevent the lawful Apprehension or Detainer of any Person, shall be guilty of\nFelony, and being convicted thereof shall be liable, at the Discretion of the Court, to\nbe kept in Penal Servitude for Life or for any Term not less than Three Years,â€”or to\nbe imprisoned for any Term not exceeding Two Years, with or without Hard Labour,\nand with or without Solitary Confinement.\n\n19 What shall constitute loaded Arms.\n\nAny Gun, Pistol, or other Arms which shall be loaded in the Barrel with Gunpowder\nor any other explosive Substance, and Ball, Shot, Slug, or other destructive Material,\nshall be deemed to be loaded Arms within the Meaning of this Act, although the\nAttempt to discharge the same may fail from want of proper Priming or from any other\nCause.\n\n20 Inflicting bodily Injury, with or without Weapon.\n\nWhosoever shall unlawfully and maliciously wound or inflict any grievous bodily\nHarm upon any other Person, either with or without any Weapon or Instrument,\nshall be guilty of a Misdemeanor, and being convicted thereof shall be liable, at the\nDiscretion of the Court, to be kept in Penal Servitude for the Term of Three Years, or\nto be imprisoned for any Term not exceeding Two Years, with or without Hard Labour.\n\n21 Attempting to choke, &c. in order to commit any indictable Offence.\n\nWhosoever shall, by any Means -whatsoever, attempt to choke, suffocate, or strangle\nany other Person, or shall, by any Means calculated to choke, suffocate, or strangle,\nattempt to render any other Person insensible, unconscious, or incapable of Resistance,\nwith Intent in any of such Cases thereby to enable himself or any other Person to\ncommit, or with Intent in any of such Cases thereby to assist any other Person in\ncommitting, any indictable Offence, shall be guilty of Felony, and being convicted\nthereof shall be liable, at the Discretion of the Court, to be kept in Penal Servitude for\nLife or for any Term not less than Three Years,â€”or to be imprisoned for any Term not\nexceeding Two Years, with or without Hard Labour.\n\n22 Using Chloroform, &c. to commit any indictable Offence.\n\nWhosoever shall unlawfully apply or administer to or cause to be taken by, or attempt\nto apply or administer to or attempt to cause to be administered to or taken by,\nany Person, any Chloroform, Laudanum, or other stupefying or overpowering Drug,\nMatter, or Thing, with Intent in any of such Cases thereby to enable himself or any\nother Person to commit, or with Intent in any of such Cases thereby to assist any\n\n\n\n6 Offences Against the Person Act 1861 (c. 100)\nDocument Generated: 2022-08-21\n\nStatus:  This is the original version (as it was originally enacted).\n\nother Person in committing, any indictable Offence, shall be guilty of Felony, and\nbeing convicted thereof shall be liable, at the Discretion of the Court, to be kept in\nPenal Servitude for Life or for any other Term not less than Three Years,â€”or to be\nimprisoned for any Term not exceeding Two Years, with or without Hard Labour.', 'type': 'text'}], 'file_id': 'file-HEHpFkAwqHtR4b2ARBkYLg', 'filename': 'OAPA.pdf', 'score': 0.8321401286406606}, {'attributes': {}, 'content': [{'text': '65 Justices may issue Warrants for searching Houses, &c. in which explosive\nSubstances are suspected to be made for the Purpose of committing Felonies\nagainst this Act\n\nAny Justice of the Peace of any County or Place in which any such Gunpowder, or\nother explosive, dangerous, or noxious Substance or Thing, or any such Machine,\nEngine, Instrument, or Thing, is suspected to be made, kept, or carried for the Purpose\nof being used in committing any of the Felonies in this Act mentioned, upon reasonable\nCause assigned upon Oath by any Person, may issue a Warrant under his Hand and Seal\nfor searching, in the Daytime, any House, Mill, Magazine, Storehouse, Warehouse,\nShop, Cellar, Yard, Wharf, or other Place, or any Carriage, Waggon, Cart, Ship,\nBoat, or Vessel, in which the same is suspected to be made, kept, or carried for such\nPurpose as herein-before mentioned; and every Person acting in the Execution of any\nsuch Warrant shall have, for seizing, removing to proper Places, and detaining all\nsuch Gunpowder, explosive, dangerous, or noxious Substances, Machines, Engines,\nInstruments, or Things, found upon such Search, which he shall have good Cause to\nsuspect to be intended to be used in committing any such Offence, and the Barrels,\nPackages, Cases, and other Receptacles in which the same shall be, the same Powers\nand Protections which are given to Persons searching for unlawful Quantities of\nGunpowder under the Warrant of a Justice by the Act passed in the Session holden\nin the Twenty-third and Twenty-fourth Years of the Reign of Her present Majesty,\nChapter One hundred and thirty-nine, intituled An Act to amend the Law concerning\nthe making, keeping, and Carriage of Gunpowder and Compositions of an explosive\nNature, and concerning the Manufacture, Sale, and Use of Fireworks.\n\nOther Matters\n\n66 A Person loitering at Night, and suspected of any Felony against this Act, may be\napprehended.\n\nAny Constable or Peace Officer may take into Custody, without a Warrant, any Person\nwhom he shall find lying or loitering in any Highway, Yard, or other Place during the\nNight, and whom he shall have good Cause to suspect of having committed or being\n\n\n\nOffences Against the Person Act 1861 (c. 100)\nDocument Generated: 2022-08-21\n\n17\n\nStatus:  This is the original version (as it was originally enacted).\n\nabout to commit any Felony in this Act mentioned, and shall take such Person as soon\nas reasonably may be before a Justice of the Peace, to be dealt with according to Law.\n\n67 Punishment of Principals in the Second Degree, and Accessories.\n\nIn the Case of every Felony punishable under this Act, every Principal in the Second\nDegree, and every Accessory before the Fact, shall be punishable in the same Manner\nas the Principal in the First Degree is by this Act punishable; and every Accessory\nafter the Fact to any Felony punishable under this Act (except Murder) shall be\nliable to be imprisoned for any Term not exceeding Two Years, with or without Hard\nLabour ; and every Accessory after the Fact to Murder shall be liable, at the Discretion\nof the Court, to be kept in Penal Servitude for Life or for any Term not less than\nThree Years, or to be imprisoned for any Term not exceeding Two Years, with or\nwithout Hard Labour; and whosoever shall counsel, aid,', 'type': 'text'}], 'file_id': 'file-HEHpFkAwqHtR4b2ARBkYLg', 'filename': 'OAPA.pdf', 'score': 0.8014356734621978}, {'attributes': {}, 'content': [{'text': "wilfully, and\nof his Malice aforethought kill and murder the Deceased ; and it shall be sufficient in\nany Indictment for Manslaughter to charge that the Defendant did feloniously kill and\nslay the Deceased; and it shall be sufficient in any Indictment against any Accessory to\nany Murder or Manslaughter to charge the Principal with the Murder or Manslaughter\n(as the Case may be) in the Manner herein-before specified, and then to charge the\nDefendant as an Accessory in the Manner heretofore used and accustomed.\n\n7 Excusable Homicide.\n\nNo Punishment or Forfeiture shall be incurred by any Person who shall kill another\nby Misfortune or in his own Defence, or in any other Manner without Felony.\n\n8 Petit Treason.\n\nEvery Offence which before the Commencement of the Act of the Ninth Year of King\nGeorge the Fourth, Chapter Thirty-one, would have amounted to Petit Treason, shall\nbe deemed to be Murder only, and no greater Offence; and all Persons guilty in respect\nthereof, whether as Principals or as Accessories, shall be dealt with, indicted, tried,\nand punished as Principals and Accessories in Murder.\n\n9 Murder or Manslaughter abroad.\n\nWhere any Murder or Manslaughter shall be committed on Land out of the United\nKingdom, whether within the Queen's Dominions or without, and whether the Person\nkilled were a Subject of Her Majesty or not, every Offence committed by any Subject\nof Her Majesty, in respect of any such Case, whether the same shall amount to\n\n\n\nOffences Against the Person Act 1861 (c. 100)\nDocument Generated: 2022-08-21\n\n3\n\nStatus:  This is the original version (as it was originally enacted).\n\nthe Offence of Murder or of Manslaughter, or of being accessory to Murder or\nManslaughter, may be dealt with, inquired of, tried, determined, and punished in any\nCounty or Place in England or Ireland in which such Person shall be apprehended\nor be in Custody, in the same Manner in all respects as if such Offence had been\nactually committed in that County or Place; provided that nothing herein contained\nshall prevent any Person from being tried in any Place out of England of Ireland for any\nMurder or Manslaughter committed out Of England or Ireland, in the same Manner\nas such Person might have been tried before the passing of this Act.\n\n10 Provision for the Trial of Murder and Manslaughter where the Death or Cause\nof Death only happens in England or Ireland.\n\nWhere any Person, being feloniously stricken, poisoned, or otherwise hurt upon the\nSea, or at any Place out of England or Ireland, shall die of such Stroke, Poisoning,\nor Hurt in England or Ireland, or, being feloniously stricken, poisoned, or otherwise\nhurt at any Place in England or Ireland, shall die of such Stroke, Poisoning, or Hurt\nupon the Sea, or at any Place out of England or Ireland, every Offence committed in\nrespect of any such Case, whether the same shall amount to the Offence of Murder\nor of Manslaughter, or of being accessory to Murder or Manslaughter, may be dealt\nwith, inquired of, tried, determined, and punished in the County or Place in England\nor Ireland in which such Death, Stroke, Poisoning, or Hurt shall happen, in the same\nManner in all respects as if such Offence had been wholly committed in that County\nor Place.\n\nAttempts to murder\n\n11 Administering Poison, or wounding with Intent to murder.", 'type': 'text'}], 'file_id': 'file-HEHpFkAwqHtR4b2ARBkYLg', 'filename': 'OAPA.pdf', 'score': 0.7958114959083712}, {'attributes': {}, 'content': [{'text': 'intituled An Act to amend the Law concerning\nthe making, keeping, and Carriage of Gunpowder and Compositions of an explosive\nNature, and concerning the Manufacture, Sale, and Use of Fireworks.\n\nOther Matters\n\n66 A Person loitering at Night, and suspected of any Felony against this Act, may be\napprehended.\n\nAny Constable or Peace Officer may take into Custody, without a Warrant, any Person\nwhom he shall find lying or loitering in any Highway, Yard, or other Place during the\nNight, and whom he shall have good Cause to suspect of having committed or being\n\n\n\nOffences Against the Person Act 1861 (c. 100)\nDocument Generated: 2022-08-21\n\n17\n\nStatus:  This is the original version (as it was originally enacted).\n\nabout to commit any Felony in this Act mentioned, and shall take such Person as soon\nas reasonably may be before a Justice of the Peace, to be dealt with according to Law.\n\n67 Punishment of Principals in the Second Degree, and Accessories.\n\nIn the Case of every Felony punishable under this Act, every Principal in the Second\nDegree, and every Accessory before the Fact, shall be punishable in the same Manner\nas the Principal in the First Degree is by this Act punishable; and every Accessory\nafter the Fact to any Felony punishable under this Act (except Murder) shall be\nliable to be imprisoned for any Term not exceeding Two Years, with or without Hard\nLabour ; and every Accessory after the Fact to Murder shall be liable, at the Discretion\nof the Court, to be kept in Penal Servitude for Life or for any Term not less than\nThree Years, or to be imprisoned for any Term not exceeding Two Years, with or\nwithout Hard Labour; and whosoever shall counsel, aid, or abet the Commission of\nany indictable Misdemeanor punishable under this Act shall be liable to be proceeded\nagainst, indicted, and punished as a principal Offender.\n\n68 Offences committed within the Jurisdiction of the Admiralty.\n\nAll indictable Offences mentioned in this Act which shall be committed within the\nJurisdiction of the Admiralty of England or Ireland shall be deemed to be Offences\nof the same Nature and liable to the same Punishments as if they had been committed\nupon the Land in England or Ireland, and may be dealt with, inquired of, tried, and\ndetermined in any County or Place in England or Ireland in which the Offender shall\nbe apprehended or be in Custody, in the same Manner in all respects as if they had\nbeen actually committed in that County or Place; and in any Indictment for any such\nOffence, or for being an Accessory to such an Offence, the Venue in the Margin shall\nbe the same as if the Offence had been committed in such County or Place, and the\nOffence shall be averred to have been committed " on the High Seas :" Provided\nthat nothing herein contained shall alter or affect any of the Laws relating to the\nGovernment of Her Majesty\'s Land or Naval Forces.\n\n69 Hard labour in Gaol or House of Correction.\n\nWhenever Imprisonment, with or without Hard Labour, may be awarded for any\nindictable Offence under this Act, the Court may sentence the Offender to be\nimprisoned, or to be imprisoned and kept to Hard Labour, in the Common Gaol or\nHouse of Correction.\n\n70 Solitary Confinement and Whipping', 'type': 'text'}], 'file_id': 'file-HEHpFkAwqHtR4b2ARBkYLg', 'filename': 'OAPA.pdf', 'score': 0.7894024962084197}, {'attributes': {}, 'content': [{'text': 'or to be imprisoned for any Term not exceeding Two Years, with or\nwithout Hard Labour; and whosoever shall counsel, aid, or abet the Commission of\nany indictable Misdemeanor punishable under this Act shall be liable to be proceeded\nagainst, indicted, and punished as a principal Offender.\n\n68 Offences committed within the Jurisdiction of the Admiralty.\n\nAll indictable Offences mentioned in this Act which shall be committed within the\nJurisdiction of the Admiralty of England or Ireland shall be deemed to be Offences\nof the same Nature and liable to the same Punishments as if they had been committed\nupon the Land in England or Ireland, and may be dealt with, inquired of, tried, and\ndetermined in any County or Place in England or Ireland in which the Offender shall\nbe apprehended or be in Custody, in the same Manner in all respects as if they had\nbeen actually committed in that County or Place; and in any Indictment for any such\nOffence, or for being an Accessory to such an Offence, the Venue in the Margin shall\nbe the same as if the Offence had been committed in such County or Place, and the\nOffence shall be averred to have been committed " on the High Seas :" Provided\nthat nothing herein contained shall alter or affect any of the Laws relating to the\nGovernment of Her Majesty\'s Land or Naval Forces.\n\n69 Hard labour in Gaol or House of Correction.\n\nWhenever Imprisonment, with or without Hard Labour, may be awarded for any\nindictable Offence under this Act, the Court may sentence the Offender to be\nimprisoned, or to be imprisoned and kept to Hard Labour, in the Common Gaol or\nHouse of Correction.\n\n70 Solitary Confinement and Whipping\n\nWhenever Solitary Confinement may be awarded for any Offence under this Act, the\nCourt may direct the Offender to be kept in Solitary Confinement for any Portion or\nPortions of any Imprisonment, or of any Imprisonment with Hard Labour, which the\nCourt may award, not exceeding One Month at any One Time, and not exceeding Three\nMonths in any One Year; and whenever Whipping may be awarded for any Offence\nunder this Act, the Court may sentence the Offender to be once privately whipped,\nand the Number of Strokes and the Instrument with which they shall be inflicted shall\nbe specified by the Court in the Sentence.\n\n\n\n18 Offences Against the Person Act 1861 (c. 100)\nDocument Generated: 2022-08-21\n\nStatus:  This is the original version (as it was originally enacted).\n\n71 Fine, and Sureties for keeping the Peace; in what Cases.\n\nWhenever any Person shall be convicted of any indictable Misdemeanor punishable\nunder this Act, the Court may, if it shall think fit, in addition to or in lieu of any\nPunishment by this Act authorized, fine the Offender, and require him to enter into\nhis own Recognizances, and to find Sureties, both, or either, for keeping the Peace\nand being of good Behaviour; and in case of any Felony punishable under this Act\notherwise than with Death the Court may, if it shall think fit, require the Offender to\nenter into his own Recognizances and to find Sureties, both or either, for keeping the\nPeace, in addition to any Punishment by this Act authorized; provided that no Person\nshall be imprisoned for not finding Sureties under this Clause for any Period exceeding\nOne Tear.\n\n72 No Certiorari, &c.', 'type': 'text'}], 'file_id': 'file-HEHpFkAwqHtR4b2ARBkYLg', 'filename': 'OAPA.pdf', 'score': 0.7312551662635148}], 'object': 'vector_store.search_results.page', 'search_query': ['What is the punishment for murder?'], 'has_more': False, 'next_page': None}
# # print(a["data"][0]["score"])


# # Method to extract scores from results 

# def getscore(results):
#     scorelist = []
#     for i in results["data"]:
#         scorelist.append(i["score"])

#     return scorelist

# # print(getscore(a))


# # Method to extract and place together text content from results that have a score above 0.5
# def getobj(results):
#     objlist = []
#     for i in results["data"]:
#         if i["score"] > 0.5:
#             objlist.append("\n".join([chunk["text"] for chunk in i["content"]]))

#     return objlist

# print(getobj(a))


# print(results.model_dump())

# # def extract_text(results):
# #     return "\n".join(
# #         chunk.text
# #         for result in results.data
# #         for chunk in result.content
# #     )

# context = "\n".join([text for text in getobj(results)])




# accessj.append({
#         "vector_store_name": vsname,
#         "vector_store_ID": vector_store_id,
#         "file_IDs": {}
#     })

from pymongo import MongoClient # mongoDB
import os
from dotenv import load_dotenv






# Load environment variables from .env file
load_dotenv()

# Initialising MongoDB client
db = MongoClient(os.getenv("MONGODBURI"))['legalbuddy'] # Database name
# chat_histcoll = db["chat_history"] # Collection name
# print(chat_histcoll)

# print("\n")

# record = chat_histcoll.find_one({"hi": 5})
# print(record)



# # find multiple
# records1 = chat_histcoll.find({"name": "Alice"})
# print(records1)

# # find all
# print("find all")
# records2 = chat_histcoll.find()
# list_records2 = list(records2)  

# print(list_records2)



# # insert one 
# print("\n")
# result = chat_histcoll.insert_one({"name": "Alice", "address": "123 Street"})
# print("Inserted ID:", result.inserted_id) 

# # insert many
# print("\n")
# docs = [
#     {"name": "Bob", "address": "456 Avenue"},
#     {"name": "Charlie", "address": "789 Boulevard"},
# ]
# result = chat_histcoll.insert_many(docs)
# print("Inserted IDs:", result.inserted_ids) 


import os
from openai import OpenAI
import openai
from dotenv import load_dotenv
import os
import json
from pymongo import MongoClient # mongoDB




# MVP = Minimal Viable Product



# Load environment variables from .env file
load_dotenv()

# Initialising MongoDB client
db = MongoClient(os.getenv("MONGODBURI"))['legalbuddy'] # Database name
chat_histcoll = db["chat_history"] # Collection name



# Initialising OpenAI client with API key from environment variable (hidden for security)
client = OpenAI(
    api_key = os.getenv("APIKEY")
)

# Constants / Configuration
OPENAI_MODEL = "gpt-4o-mini"
MAX_HISTORY_LENGTH = 6 # Optimising how many previous messages to include in context for the model - storing this data for improvement of the model later on
CACHE_FILE = "test.json" # JSON file to store file IDs and vector store IDs
CHAT_HISTORY_FILE = "chathist.json" # JSON file to store chat history



# Uploading a file to OpenAI for use

def file_upload(filename):
    with open(filename, "rb") as f:
        file = client.files.create(file=f, purpose="assistants")
        print(f"[âœ“] Uploaded {filename} â†’ ID: {file.id}")
        return file.id
    





# Creating a vector store (RAG) and uploading the file to it
# def create_vector_store(file_id):
#     vs = client.vector_stores.create(name="Simple Vector Store")
#     client.vector_stores.files.create_and_poll(vector_store_id=vs.id, file_id=file_id)
#     print(f"[âœ“] Created vector store â†’ ID: {vs.id}")
#     return vs




# Going into the vector store in order to query it further
def search_vector_store(vector_store_id, user_input):
    results = client.vector_stores.search(
        vector_store_id=vector_store_id,
        query=user_input, # Query line to search for vector
        rewrite_query=True,
        max_num_results=10
    )
    return results
 # Searching the vector store with the user input question



# Method to extract and place together text content from results that have a score above 0.5
def getobj(results):
    objlist = []
    for i in results.data:
        if i.score > 0.5:
            objlist.append("\n".join([chunk.text for chunk in i.content]))

    return objlist


# Taking out an answer from the model based on whats been produced
def synthesize_answer(chat_history, context_text, user_input):
    messages = [{"role": "system", "content": "You are a helpful legal assistant and your target audience is the general public that do not know the law, as well as barristers and also solicitors who are professionals in the law. Use the provided legal document in context to answer the user's question. If the act cannot be cited/utilised to answer the user's query, please state that this act is NOT RELEVANT by specifically stating that the act they provided does not apply to their question, but suggest a relevant act. When producing an answer for the user, please cite relevant/important sections. Additionally, if the Act doesn't appear to be relevant to their query and you cannot cite any sections, please state that the act is not relevant to their query, but do still answer their question about the law and suggest a relevant act the user can use instead."}] # Content of the system message - can be modified to change how the model will answer
    messages.extend(chat_history[-MAX_HISTORY_LENGTH:]) # Adding the last few messages from chat history to provide context
    messages.append({"role": "user", "content": f"Context:\n{context_text}\n\nQuestion: {user_input}"})

    response = client.chat.completions.create(
        model=OPENAI_MODEL,
        messages=messages
    )

    return response.choices[0].message.content

# Memory/Cache of file IDs and vector store IDs
def load_json(json_file_path):
    if os.path.exists(json_file_path):
        with open(json_file_path, "r") as f:
            return json.load(f)
    return {}

# Saving the JSON file with updated context
def save_json(context, json_file_path):
    with open(json_file_path, "w") as f:
        json.dump(context, f)

# Saving the file ID and Filename/**pathway!!!** to the JSON cache dictionary + saving the JSON file
def save_id_cache(file_id, json_store, filename, vector_store_id=None):
    for entry in json_store:
        if vector_store_id and entry.get("vector_store_ID") == vector_store_id:
            entry["file_IDs"][filename] = file_id
            break
    
    save_json(json_store, CACHE_FILE)


def pull_vs(vsname, filename):
    # Variables with function calling
    accessj = load_json(CACHE_FILE) # Loading the JSON file to access previous file IDs and vector store IDs
    new = False
    file_ids = {} # Initialising an empty dictionary to store file IDs
    vector_store_id = ""



    # Checking if the vector store already exists in the JSON cache dictionary - therefore wont need to create a new one
    for item in accessj:
        if "vector_store_name" in item and item["vector_store_name"] == vsname:
            vector_store_id = item.get("vector_store_ID", "")
            file_ids = item.get("file_IDs", {}) # Getting the dictionary of file IDs from the JSON cache
            break

    if not vector_store_id: # If the vector store ID doesn't exist, create a new vector store
        vs = client.vector_stores.create(name=vsname) # Creating the vector store and storing the ID in a variable IF it doesn't already exist in the JSON cache dictionary
        vector_store_id = vs.id
        new = True 
        print(f"[âœ“] Created vector store â†’ ID: {vs.id}")




    # Checking if the file has already been uploaded by looking in the JSON cache dictionary (via filename) 
    if filename in file_ids:
        print(f"[i] File already uploaded. Using cached ID: {file_ids[filename]}")
        file_id = file_ids[filename]
    else: # If not uploaded, upload the file and save the ID to the JSON cache dictionary
        file_id = file_upload(filename) # Uploading the file to cloud and getting back the file ID (unique) - storing in variable - calling function
        if not new:
            save_id_cache(file_id, accessj, filename, vector_store_id)

        client.vector_stores.files.create_and_poll(vector_store_id=vector_store_id, file_id=file_id) # Adding the file to the vector store
        print(f"[âœ“] Added file to vector store â†’ ID: {vector_store_id}")


    # If the file is new, add the vector store details and file ID to the JSON cache dictionary and save the JSON file
    if new: 
        new_file_ids = {}
        new_file_ids[filename] = file_id

        accessj.append({
            "vector_store_name": vsname,
            "vector_store_ID": vector_store_id,
            "file_IDs": new_file_ids
        })

        save_json(accessj, CACHE_FILE)

    return vector_store_id

# Variables that control the flow of the program afterwards
vsname = "Simple Vector Store"
filename = "OAPA.pdf" # Should be replaced with the path to the file you want to upload (interchangable later........)

vector_store_id = pull_vs(vsname, filename) # Calling the function to add the file and create/access the vector store - getting back the vector store ID



chat_history_id = 'theid' # This can be changed to allow for multiple chat histories to be stored and accessed
chat_history_db = load_json(CHAT_HISTORY_FILE) # Loading the chat history JSON file
chat_history = chat_history_db.get(chat_history_id, []) # Getting the chat history for the specific ID, or initialising an empty list if it doesn't exist (annoying bug fixed)


while True:
        # Querying the model with a loop - allowing for multiple questions to be asked
        user_input = input("\nQuery: ").strip() 
        if user_input.lower() in ["exit", "quit"]:
            break
        print("Searching...")
        results = search_vector_store(vector_store_id, user_input)
        context_text = "\n".join([text for text in getobj(results)])
        print("Thinking...")
        answer =  synthesize_answer(chat_history, context_text, user_input)
        print("\nðŸ¤– Answer:\n", answer)

        
        chat_history.append({"role": "user", "content": user_input}) # Storing user's question in chat_history (memory) for future use
        chat_history.append({"role": "assistant", "content": answer}) # Storing model's response in chat_history (memory) for future use
        save_json({chat_history_id: chat_history}, CHAT_HISTORY_FILE) # Saving the chat history to a JSON file for future use


